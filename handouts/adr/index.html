Last Updated on 2023/02/25      

<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head> <title>Architectural Decision Records</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- fn-in,html,htex4ht,xhtml --> 
<meta name="src" content="main.tex" /> 
<link rel="stylesheet" type="text/css" href="main.css" /> 
<link rel="stylesheet" href="https://latex.now.sh/style.css"> 
<link rel="stylesheet" href="/notes.css"> 
<style>body {max-width: 100ch;} 
dl dd {text-align: left}</style> 
</head><body 
>
   <div class="maketitle"><a 
 id="Q1-1-1"></a>
_________________________________________________________________________________________________
<h2 class="titleHead">Architectural Decision Records</h2>                                                  Software Architecture
   <div class="date" >March 6, 2023</div>                                                                                                                                                   <div class="author" >Richard
Thomas</div>
____________________________________________________________________________________________
   </div>
   <h3 class="sectionHead"><span class="titlemark">1    </span> <a 
 id="x1-10001"></a>Introduction</h3>
<!--l. 9--><p class="noindent" >Documenting reasons why a decision was made about some aspect of the software architecture is important for
the long-term maintainability of the system. Architecture decision records (ADR) are a simple but informative
approach to documenting these reasons.
</p><!--l. 12--><p class="indent" >   Michael Nygard was one of the early proponents of ADRs. His argument is that no one reads large documents
but not knowing the rationale behind architecturally important decisions can lead to disastrous consequences,
when later decisions are made that defeat the earlier decisions <span class="cite">[<a 
href="#Xnygard-adr">1</a>]</span>. Nygard created ADRs as a light-weight
approach to documenting important architecture decisions, to suit agile development processes. The ideas were
based on Philippe Kruchten&#8217;s discussion of the importance of architecture decisions in his article &#8220;The Decision
View&#8217;s Role in Software Architecture Practice&#8221; <span class="cite">[<a 
href="#Xkruchten-arch-decisions">2</a>]</span>. In this article Kruchten discusses extending his &#8220;4+1 View Model
of Software Architecture&#8221; <span class="cite">[<a 
href="#X4+1-model">3</a>]</span> to capture the rationale for important decisions while designing each view of the
architecture.
</p><!--l. 21--><p class="indent" >   Architecture decision records should capture important decisions that are made about the design of the
architecture. These include decisions that influence the </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 24--><p class="noindent" >structure of the architecture,
      </p></li>
      <li class="itemize">
      <!--l. 25--><p class="noindent" >delivery of quality attributes,
      </p></li>
      <li class="itemize">
      <!--l. 26--><p class="noindent" >dependencies between key parts of the architecture,
      </p></li>
      <li class="itemize">
      <!--l. 27--><p class="noindent" >interfaces between key parts of the architecture or external interfaces, and
      </p></li>
      <li class="itemize">
      <!--l. 28--><p class="noindent" >implementation techniques or platforms.</p></li></ul>
<!--l. 30--><p class="noindent" >These decisions provide important information for developers who have to work with the architecture, so that they
know why decisions have been made and know how to design their code to fit into the architecture. They also
provide important information for those who have to maintain the software in the future. ADRs help maintainers
to know why decisions were made, so that they do not inadvertently make decisions that result in breaking
expectations about the software.
</p><!--l. 36--><p class="indent" >   ADRs are short notes about a single decision. The intent is to make it easy to record the information about the
decision, so that it is more likely to be documented. ADRs are usually kept with the key project documentation.
The argument is often made that this should be within the version control system (e.g. git) holding the project&#8217;s
                                                                                                    
                                                                                                    
source code. For example, a directory <span 
class="ectt-1200">doc/architecture/adr </span>in the project repository to contain the ADRs. The
C4 model recommends you create a directory in the project repository to hold the C4 diagrams with a
subdirectory for documentation, and another subdirectory for ADRs (e.g. <span 
class="ectt-1200">c4_model</span>, <span 
class="ectt-1200">c4_model/docs </span>and
<span 
class="ectt-1200">c4_model/adrs</span>). Note that the C4 modelling tools do not like having the subdirectory containing the ADRs within
the documentation subdirectory.
</p><!--l. 46--><p class="indent" >   Each ADR is written in a separate file, using a simple notation like markdown. The file names are numbered so
the history of decisions can be viewed. It is recommended that the file name describe the decision, to make it
easier to scan for information about specific types of architectural decisions. Examples of meaningful file names
include: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 52--><p class="noindent" ><span 
class="ectt-1200">0001-independent-business-logic.md</span>
      </p></li>
      <li class="itemize">
      <!--l. 53--><p class="noindent" ><span 
class="ectt-1200">0002-implement-JSF-webapp.md</span>
      </p></li>
      <li class="itemize">
      <!--l. 54--><p class="noindent" ><span 
class="ectt-1200">0003-choose-database.md</span></p></li></ul>
<!--l. 56--><p class="noindent" >The directory containing these ADR files is the history of all architectural decisions made for the project.
</p><!--l. 58--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2    </span> <a 
 id="x1-20002"></a>Template</h3>
<!--l. 59--><p class="noindent" >There are a few templates available to help provide consistent formatting of an ADR. The recommended template
format contains the following sections.
      </p><dl class="description"><dt class="description">
      <!--l. 62--><p class="noindent" >
<span 
class="Cabin-Bold-tlf-t1-x-x-120">Title</span> </p></dt><dd 
class="description">
      <!--l. 62--><p class="noindent" >Short phrase that describes the key decision.
      </p></dd><dt class="description">
      <!--l. 63--><p class="noindent" >
<span 
class="Cabin-Bold-tlf-t1-x-x-120">Date</span> </p></dt><dd 
class="description">
      <!--l. 63--><p class="noindent" >When the decision was made.
      </p></dd><dt class="description">
      <!--l. 64--><p class="noindent" >
<span 
class="Cabin-Bold-tlf-t1-x-x-120">Status</span> </p></dt><dd 
class="description">
      <!--l. 64--><p class="noindent" >Current status of the decision (i.e. proposed, accepted, deprecated, superseded or rejected).
      </p></dd><dt class="description">
      <!--l. 65--><p class="noindent" >
<span 
class="Cabin-Bold-tlf-t1-x-x-120">Summary</span> </p></dt><dd 
class="description">
      <!--l. 65--><p class="noindent" >Summarise the decision and its rationale.
                                                                                                    
                                                                                                    
      </p></dd><dt class="description">
      <!--l. 66--><p class="noindent" >
<span 
class="Cabin-Bold-tlf-t1-x-x-120">Context</span> </p></dt><dd 
class="description">
      <!--l. 66--><p class="noindent" >Describe the facts that influence the decision. State these in value-neutral language.
      </p></dd><dt class="description">
      <!--l. 67--><p class="noindent" >
<span 
class="Cabin-Bold-tlf-t1-x-x-120">Decision</span> </p></dt><dd 
class="description">
      <!--l. 67--><p class="noindent" >Explain how the decision will solve the problem, in light of the facts presented in the context.
      </p></dd><dt class="description">
      <!--l. 68--><p class="noindent" >
<span 
class="Cabin-Bold-tlf-t1-x-x-120">Consequences</span> </p></dt><dd 
class="description">
      <!--l. 68--><p class="noindent" >Describe the impact of the decision. What becomes easier and harder to do? There will be positive,
      neutral and negative consequences, identify all of them.</p></dd></dl>
<!--l. 72--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3    </span> <a 
 id="x1-30003"></a>ADR Example</h3>
<!--l. 73--><p class="noindent" >The following is an example ADR from the Sahara eCommerce application from section 3 of the <span 
class="Cabin-Italic-tlf-t1-x-x-120">Architectural</span>
<span 
class="Cabin-Italic-tlf-t1-x-x-120">Views </span>notes. <br 
class="newline" />
</p><!--l. 76--><p class="noindent" ><span 
class="Cabin-Bold-tlf-t1-x-x-120">1. Independent Business Logic</span>
</p><!--l. 78--><p class="noindent" ><span 
class="Cabin-Bold-tlf-t1-x-x-120">Date: </span>2023-01-06
</p><!--l. 80--><p class="noindent" ><span 
class="Cabin-Bold-tlf-t1-x-x-120">Status: </span>Accepted
</p><!--l. 82--><p class="noindent" ><span 
class="Cabin-Bold-tlf-t1-x-x-120">Summary</span><br 
class="newline" /><span 
class="Cabin-Italic-tlf-t1-x-x-120">In the context of </span>delivering an application with multiple platform interfaces, <span 
class="Cabin-Italic-tlf-t1-x-x-120">facing </span>budget constraints on
development costs, <span 
class="Cabin-Italic-tlf-t1-x-x-120">we decided </span>to implement all business logic in an independent tier of the software architecture,
<span 
class="Cabin-Italic-tlf-t1-x-x-120">to achieve </span>consistent logical behaviour across platforms, <span 
class="Cabin-Italic-tlf-t1-x-x-120">accepting </span>potential complexity of interfaces to different
platforms.
</p><!--l. 89--><p class="noindent" ><span 
class="Cabin-Bold-tlf-t1-x-x-120">Context</span> </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 91--><p class="noindent" >The system is to have both mobile and web application frontends.
      </p></li>
      <li class="itemize">
      <!--l. 92--><p class="noindent" >Marketing department wants a similar user experience across platforms.
      </p></li>
      <li class="itemize">
      <!--l. 93--><p class="noindent" >Delivering functional requirements requires complex processing and database transactions.
      </p>
           <ul class="itemize2">
           <li class="itemize">
           <!--l. 95--><p class="noindent" >Product recommendations based on both a customer&#8217;s history and on purchasing behaviour of
           similar customers.
                                                                                                    
                                                                                                    
           </p></li>
           <li class="itemize">
           <!--l. 96--><p class="noindent" >Recording all customer interactions in the application.</p></li></ul>
      </li>
      <li class="itemize">
      <!--l. 98--><p class="noindent" >Sales department wants customers to be able to change between using mobile and web applications
      without interrupting their sales experience.
      </p></li>
      <li class="itemize">
      <!--l. 99--><p class="noindent" >Development team has experience using Java.</p></li></ul>
<!--l. 102--><p class="noindent" ><span 
class="Cabin-Bold-tlf-t1-x-x-120">Decision</span><br 
class="newline" />All business logic will be implemented in its own tier of the software architecture. Web and mobile applications
will implement the interaction tier. They will communicate with the backend to perform all logic processing. This
provides clear separation of concerns and ensures consistency of business logic across frontend applications. It
means the business logic only needs to be implemented once. This follows good design practices and common
user interface design patterns.
</p><!--l. 110--><p class="indent" >   The business logic will be implemented in Java. This suits the current development team&#8217;s experience and is a
common environment. Java has good performance characteristices. Java has good support for interacting with
databases, to deliver the data storage and transaction processing requirements.
                                                                                                    
                                                                                                    
</p><!--l. 116--><p class="noindent" ><span 
class="Cabin-Bold-tlf-t1-x-x-120">Consequences</span><br 
class="newline" />Advantages </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 119--><p class="noindent" >Separation of concerns, keeping application logic and interface logic separate.
      </p></li>
      <li class="itemize">
      <!--l. 120--><p class="noindent" >Ensures consistency, if business logic is only implemented in one place.
      </p></li>
      <li class="itemize">
      <!--l. 121--><p class="noindent" >Business logic can execute in a computing environment optimised for processing and transactions.
      </p>
           <ul class="itemize2">
           <li class="itemize">
           <!--l. 123--><p class="noindent" >Also makes load balancing easier to implement.</p></li></ul>
      </li></ul>
<!--l. 126--><p class="noindent" >Neutral </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 128--><p class="noindent" >Multiple interfaces are required for different frontend applications. These can be delivered through
      different Java libraries.</p></li></ul>
<!--l. 131--><p class="noindent" >Disadvantages </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 133--><p class="noindent" >Additional complexity for the overall architecture of the system.</p></li></ul>
<!--l. 136--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4    </span> <a 
 id="x1-40004"></a>Quality</h3>
<!--l. 137--><p class="noindent" >A well written ADR explains the reasons for making the decision, while discussing pros and cons of the decision. In
some cases it is helpful to explain reasons for not selecting other seemingly good options. The ADR should be
specific about a single decision, not a group of decisions.
</p><!--l. 141--><p class="indent" >   The context should provide all the relevant facts that influence the decision. The decisions section should
explain how business priorities or the organisation&#8217;s strategic goals influenced the decision. Where the team&#8217;s
membership or skills has influenced the decision, these should be acknowledged. All consequences should be
described. These may include decisions that need to be resolved later or links to other ADRs that record decisions
that were made as a result of this decision.
</p><!--l. 148--><p class="indent" >   The summary follows the format of a Y-statement <span class="cite">[<a 
href="#Xy-statement">4</a>]</span>. It includes key information about the decision
for quick consumption, leaving the details for the rest of the ADR. The template for a Y-statement
is:
</p><!--l. 152--><p class="indent" >   <span 
class="Cabin-Bold-tlf-t1-x-x-120">In the context of </span><span 
class="Cabin-Italic-tlf-t1-x-x-120">functional requirement or architecture characteristic</span>,
</p><!--l. 154--><p class="indent" >   <span 
class="Cabin-Bold-tlf-t1-x-x-120">facing </span><span 
class="Cabin-Italic-tlf-t1-x-x-120">non-functional requirement or quality attribute</span>,
</p><!--l. 156--><p class="indent" >   <span 
class="Cabin-Bold-tlf-t1-x-x-120">we decided </span><span 
class="Cabin-Italic-tlf-t1-x-x-120">selected option</span>,
</p><!--l. 158--><p class="indent" >   <span 
class="Cabin-Bold-tlf-t1-x-x-120">to achieve </span><span 
class="Cabin-Italic-tlf-t1-x-x-120">benefits</span>,
</p><!--l. 160--><p class="indent" >   <span 
class="Cabin-Bold-tlf-t1-x-x-120">accepting </span><span 
class="Cabin-Italic-tlf-t1-x-x-120">drawbacks</span>.
</p><!--l. 162--><p class="noindent" >The Y-statement can be expanded to include <span 
class="Cabin-Bold-tlf-t1-x-x-120">neglected </span><span 
class="Cabin-Italic-tlf-t1-x-x-120">alternative options </span>after the <span 
class="Cabin-Bold-tlf-t1-x-x-120">we decided </span>clause. A <span 
class="Cabin-Bold-tlf-t1-x-x-120">because</span>
clause providing <span 
class="Cabin-Italic-tlf-t1-x-x-120">additional rationale </span>can be added to the end of the statement. Some teams use this expanded
form of the Y-statement as the complete ADR for simple decisions.
                                                                                                    
                                                                                                    
</p><!--l. 167--><p class="indent" >   ADRs should be reviewed after about one month. Consider how the consequences have played out in reality.
Revise bad decisions before too much has been built based on the decision. The ADR may need to be updated to
include any consequences that have been uncovered in practice.
</p><!--l. 172--><p class="indent" >   ADRs should be immutable. Do not change existing information in an ADR. An ADR can have new information
added to it, like adding new consequences. If the decision needs to be changed, create a new ADR. The original
ADR should have its status changed to <span 
class="Cabin-Italic-tlf-t1-x-x-120">deprecated</span>, and then <span 
class="Cabin-Italic-tlf-t1-x-x-120">superseded </span>once the new decision is accepted and put
into practice. Add a link in the original ADR to the new ADR, and the new ADR should link back to the
original.
</p><!--l. 179--><p class="indent" >   Sometimes an ADR is not superseded by a new ADR, instead it is extended or amended by another ADR. In
these cases, the original ADR still has an <span 
class="Cabin-Italic-tlf-t1-x-x-120">accepted </span>status but a link is added indicating the other ADR that amends
or extends the original ADR. The new ADR then includes a link back to the original ADR, indicating that the new
ADR extends or amends the original.
                                                                                                    
                                                                                                    
</p><!--l. 185--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5    </span> <a 
 id="x1-50005"></a>What to Put in an ADR?</h3>
<!--l. 186--><p class="noindent" >Only document important decisions that affect the architecture&#8217;s structure, non-functional characteristics,
dependencies, interfaces, or construction techniques. Michael Nygard calls these &#8220;architecturally significant&#8221;
decisions <span class="cite">[<a 
href="#Xnygard-adr">1</a>]</span>. The types of decisions that usually should be documented are: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 191--><p class="noindent" >Critical or important to delivering system functionality.
      </p></li>
      <li class="itemize">
      <!--l. 192--><p class="noindent" >Helps deliver important quality attributes.
      </p></li>
      <li class="itemize">
      <!--l. 193--><p class="noindent" >Unconventional or risky approach to a solution.
      </p></li>
      <li class="itemize">
      <!--l. 194--><p class="noindent" >Has expensive consequences.
      </p></li>
      <li class="itemize">
      <!--l. 195--><p class="noindent" >Has long lasting effects or will affect a large part of the design.
      </p></li>
      <li class="itemize">
      <!--l. 196--><p class="noindent" >Will affect a large number of stakeholders or an important stakeholder.
      </p></li>
      <li class="itemize">
      <!--l. 197--><p class="noindent" >Took a long time or significant effort to decide.
      </p></li>
      <li class="itemize">
      <!--l. 198--><p class="noindent" >Unexpected decisions that were required late in the project. These may also be important learning
      experiences.</p></li></ul>
<!--l. 201--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">6    </span> <a 
 id="x1-60006"></a>Conclusion</h3>
<!--l. 202--><p class="noindent" >Decisions that affect the software architecture need to be recorded for reference in the future. In a large project it
is not possible for everyone to be aware of every decision that is made. ADRs provide a mechanism for team
members to find reasons for decisions to help them understand how to work within its constraints. ADRs give new
team members a starting point to learn about the architecture and understand how it evolved into its current
state. They also provide a reminder for yourself when you are wondering why you did something a
particular way, or when you need to explain your decision to someone else, months after you made the
decision.
</p><!--l. 209--><p class="indent" >   The takeaway is, write an ADR whenever you make an important decision. You, or a colleague, will need to
refer to it at some point in the future. Eli Perkins has a good summary of why you should write ADRs at the <a 
href="https://github.blog/2020-08-13-why-write-adrs/" >GitHub
Blog</a><span class="footnote-mark"><a 
href="#fn1x0" id="fn1x0-bk"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-6001f1"></a>
<span class="cite">[<a 
href="#Xwhy-write-adrs">5</a>]</span>.
                                                                                                    
                                                                                                    
</p><!--l. 1--><p class="noindent" >
</p>
   <h3 class="likesectionHead"><a 
 id="x1-7000"></a>References</h3>
<!--l. 1--><p class="noindent" >
   </p><div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 [1]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xnygard-adr"></a>M.&#x00A0;Nygard,                       &#8220;Documenting                       architecture                       decisions.&#8221;                       
<a 
href="https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions" class="url" ><span 
class="ectt-1200">https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions</span></a>,  November
   2011. Accessed: 2022-01-27.
   </p>
   <p class="bibitem" ><span class="biblabel">
 [2]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xkruchten-arch-decisions"></a>P.&#x00A0;Kruchten, R.&#x00A0;Capilla, and J.&#x00A0;C. Duenas, &#8220;The decision view&#8217;s role in software architecture practice,&#8221;
   <span 
class="Cabin-Italic-tlf-t1-x-x-120">IEEE Software</span>, vol.&#x00A0;26, no.&#x00A0;2, pp.&#x00A0;36&#8211;42, 2009.
   </p>
   <p class="bibitem" ><span class="biblabel">
 [3]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="X4+1-model"></a>P.&#x00A0;Kruchten,                                                                                                                                     &#8220;Architectural
   blueprints &#8212; the &#8216;4+1&#8217; view model of software architecture,&#8221; <span 
class="Cabin-Italic-tlf-t1-x-x-120">IEEE Software</span>, vol.&#x00A0;12, no.&#x00A0;6, pp.&#x00A0;42&#8211;50,
   1995. <a 
href="https://www.cs.ubc.ca/~gregor/teaching/papers/4+1view-architecture.pdf" class="url" ><span 
class="ectt-1200">https://www.cs.ubc.ca/~gregor/teaching/papers/4+1view-architecture.pdf</span></a>.
   </p>
   <p class="bibitem" ><span class="biblabel">
 [4]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xy-statement"></a>O.&#x00A0;Zimmermann,                        &#8220;Architectural                        decisions                        &#8211;                        the
   making of.&#8221; <a 
href="https://ozimmer.ch/practices/2020/04/27/ArchitectureDecisionMaking.html" class="url" ><span 
class="ectt-1200">https://ozimmer.ch/practices/2020/04/27/ArchitectureDecisionMaking.html</span></a>,
   March 2021. Accessed: 2022-02-02.
   </p>
   <p class="bibitem" ><span class="biblabel">
 [5]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xwhy-write-adrs"></a>E.&#x00A0;Perkins, &#8220;Why write adrs.&#8221; <a 
href="https://github.blog/2020-08-13-why-write-adrs/" class="url" ><span 
class="ectt-1200">https://github.blog/2020-08-13-why-write-adrs/</span></a>, August
   2020. Accessed: 2022-02-02.
</p>
   </div>
   <div class="footnotes"><a 
 id="x1-6002x6"></a>
<!--l. 212--><p class="indent" >       <span class="footnote-mark"><a 
href="#fn1x0-bk" id="fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
href="https://github.blog/2020-08-13-why-write-adrs/" class="url" ><span 
class="ectt-1000">https://github.blog/2020-08-13-why-write-adrs/</span></a></p>                                             </div>
 
</body></html> 

                                                                                                    


