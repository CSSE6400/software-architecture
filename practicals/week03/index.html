Last Updated on 2023/03/04
                                <span class="rotatebox" style="transform: rotate(-25deg);">  Teacher Version </span>                                                 

<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head> <title>Docker and Docker Compose</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- fn-in,html,htex4ht,xhtml --> 
<meta name="src" content="main.tex" /> 
<link rel="stylesheet" type="text/css" href="main.css" /> 
<link rel="stylesheet" href="https://latex.now.sh/style.css"> 
<link rel="stylesheet" href="/notes.css"> 
<style>body {max-width: 100ch;} 
dl dd {text-align: left}</style> 
</head><body 
>
   <div class="maketitle"><a 
 id="Q1-1-1"></a>
_________________________________________________________________________________________________
<h2 class="titleHead">Docker and Docker Compose</h2>                                                    Software Architecture
   <div class="date" >March 6, 2023</div>                                                                                                                           <div class="author" >Evan Hughes &amp; Brae
Webb</div>
______________________________________________________________________________________________
   </div>
   <hr class="figure" /><div class="figure" 
>
                                                                                                    
                                                                                                    
<a 
 id="x1-2r1"></a>
                                                                                                    
                                                                                                    
<!--l. 18--><p class="noindent" ><img 
src="images/docker.png" alt="PIC"  
width="525" height="525"  />
<br /> </p><div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content">Docker containers by MidJourney with Prompt ""</span></div><!--tex4ht:label?: x1-2r1 -->
                                                                                                    
                                                                                                    
   </div><hr class="endfigure" />
   <h3 class="sectionHead"><span class="titlemark">1    </span> <a 
 id="x1-10001"></a>This Week</h3>
<!--l. 23--><p class="noindent" >This week our goal is to: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 25--><p class="noindent" >Learn docker basics.
      </p></li>
      <li class="itemize">
      <!--l. 26--><p class="noindent" >Dockerise our Todo application from last week.
      </p></li>
      <li class="itemize">
      <!--l. 27--><p class="noindent" >Move to a postgresql database from the SQLite database we used last week.
      </p></li>
      <li class="itemize">
      <!--l. 28--><p class="noindent" >Testing and Packaging our application on commit.</p></li></ul>
<!--l. 31--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2    </span> <a 
 id="x1-20002"></a>Getting Started with Docker</h3>
<!--l. 33--><p class="noindent" >In the lectures we have delved into the world of containers and how they can be used to create a consistent
environment for our applications. Depending on the courses you have taken you may have been exposed to them
as either a user or a consumer, for instance if you have submitted assessment to gradescope in CSSE1001 or
CSSE2002 the submission system uses docker to run your code.<br 
class="newline" />
</p>
   <div class="tcolorbox tcolorbox" id="tcolobox-1">    
<div class="tcolorbox-title">
<!--l. 37--><p class="indent" >   Notice</p></div> 
<div class="tcolorbox-content"><!--l. 37--><p class="noindent" >This practical will assume you have not used docker before but we will be skipping over some aspects
since its not needed for our purposes. Though since docker is a tool that many courses can use
we  have  created  a  mini-course  on  it.  You  can  find  it  here:  <a 
href="https://extend.uq.edu.au" class="url" ><span 
class="ectt-1200">https://extend.uq.edu.au</span></a>.  We
recommend checking out the mini-course if you have any difficulties with the practical.  </p> 
</div> 
</div>
   <div class="tcolorbox tcolorbox" id="tcolobox-2">    
<div class="tcolorbox-title">
<!--l. 41--><p class="indent" >   For the teacher</p></div> 
<div class="tcolorbox-content"><!--l. 41--><p class="noindent" >Sections  2.1  and  2.2  are  presentation  based  where  you  should  be  covering  the  fundementals  of
docker images and containers. Where we are using container to describe the implemented image
running in an environment.  </p> 
</div> 
</div>
<!--l. 43--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.1    </span> <a 
 id="x1-30002.1"></a>Docker Images</h4>
                                                                                                    
                                                                                                    
<!--l. 45--><p class="noindent" >Images are the building block of the principals on containerisation. They are a self contained environment that can
be run that contains the depenedencies and code for an application. A common way to build an image is to use a
Dockerfile. Though Docker was not the first to make this concept, it is very popular and relativly easy to
use.
</p><!--l. 47--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.1    </span> <a 
 id="x1-40002.1.1"></a>Dockerfile</h5>
<!--l. 49--><p class="noindent" >The Dockerfile is a plain text file with its own markup language that is used to describe the image. It is a series of
instructions that are run in order to build the image. The instructions are run in a layered fashion, each instruction
is run on top of the previous instruction. This means that if you change a line in the Dockerfile you
only need to rebuild the layers that have changed. This is a huge time saver when developing your
application.
</p><!--l. 51--><p class="indent" >   A reference of all possible Dockerfile instructions can be found here: <a 
href="https://docs.docker.com/engine/reference/builder/" class="url" ><span 
class="ectt-1200">https://docs.docker.com/engine/reference/builder/</span></a>.
For the purposes of the course we are just gonna cover some of the basics and some common recipes.
</p>
   <div class="framedenv" id="code-1">
<!--l. 54--><pre class="listings" id="listing-1"><span class="label"><a 
 id="x1-4001r1"></a></span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">syntax</span></span><span style="color:#33997E"><span 
class="ectt-1200">=</span></span><span style="color:#33997E"><span 
class="ectt-1200">docker</span></span><span style="color:#33997E"><span 
class="ectt-1200">/</span></span><span style="color:#33997E"><span 
class="ectt-1200">dockerfile</span></span><span style="color:#33997E"><span 
class="ectt-1200">:1</span></span> 
<span class="label"><a 
 id="x1-4002r2"></a></span><span style="color:#006699"><span 
class="ectt-1200">FROM</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ubuntu</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"><span 
class="ectt-1200">latest</span></span>
 
<span class="label"><a 
 id="x1-4003r3"></a></span></pre>
   </div>
<!--l. 59--><p class="indent" >   When building a Dockerfile you need to start with a base image. This is the image that you will build on top of.
In this case we are using the latest version of ubuntu. This ubutu is a very minimal image that is used intended to
be used as a starting point and is itself an image.
</p>
   <div class="framedenv" id="code-1">
<!--l. 61--><pre class="listings" id="listing-2"><span class="label"><a 
 id="x1-4004r1"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">syntax</span></span><span style="color:#33997E"><span 
class="ectt-1200">=</span></span><span style="color:#33997E"><span 
class="ectt-1200">docker</span></span><span style="color:#33997E"><span 
class="ectt-1200">/</span></span><span style="color:#33997E"><span 
class="ectt-1200">dockerfile</span></span><span style="color:#33997E"><span 
class="ectt-1200">:1</span></span> 
<span class="label"><a 
 id="x1-4005r2"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">FROM</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ubuntu</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"><span 
class="ectt-1200">latest</span></span> 
<span class="label"><a 
 id="x1-4006r3"></a></span> 
<span class="label"><a 
 id="x1-4007r4"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Installing</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">dependencies</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">for</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">running</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">a</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">python</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span> 
<span class="label"><a 
 id="x1-4008r5"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">RUN</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apt</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">get</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">update</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">&amp;&amp;</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apt</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">get</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">y</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">python3</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">python3</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">pip</span></span>
 
<span class="label"><a 
 id="x1-4009r6"></a></span></pre>
   </div>
<!--l. 69--><p class="indent" >   Now that we have a base image we can start to add our own dependencies. In this case we are
installing python3 and pip. The RUN command is used to run a command in the container. Since we are
using ubuntu we can use apt-get to install our dependencies and we are chaining the commands
so that they are run as one block. You will notice that we are running <span 
class="ectt-1200">apt-get update </span>before we
install our dependencies. This is because the base image probably has no package caches as that
would take up unnesscary space. So we need to update the package cache before we can install
anything.
</p>
   <div class="tcolorbox tcolorbox" id="tcolobox-3">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><!--l. 71--><p class="noindent" >TODO: continue fleshing this out </p> 
</div> 
</div>
<!--l. 73--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.2    </span> <a 
 id="x1-50002.1.2"></a>Dockerfile Layers</h5>
<!--l. 75--><p class="noindent" >In the previous sections we have been using the RUN, ADD and COPY to build up our image to run an example
application. When the container is built each of these instructions is run on a layer of the image. This means that if
you change a line in the Dockerfile you only need to rebuild the layers that have changed. This is a huge time saver
when developing your application.
                                                                                                    
                                                                                                    
</p><!--l. 77--><p class="indent" >   Lets have a look at an example of the layers that are created when we build our Dockerfile from the previous
section.
</p>
   <div class="framedenv" id="code-1">
<!--l. 79--><pre class="listings" id="listing-3"><span class="label"><a 
 id="x1-5001r1"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">syntax</span></span><span style="color:#33997E"><span 
class="ectt-1200">=</span></span><span style="color:#33997E"><span 
class="ectt-1200">docker</span></span><span style="color:#33997E"><span 
class="ectt-1200">/</span></span><span style="color:#33997E"><span 
class="ectt-1200">dockerfile</span></span><span style="color:#33997E"><span 
class="ectt-1200">:1</span></span> 
<span class="label"><a 
 id="x1-5002r2"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">FROM</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ubuntu</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"><span 
class="ectt-1200">latest</span></span> 
<span class="label"><a 
 id="x1-5003r3"></a></span> 
<span class="label"><a 
 id="x1-5004r4"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Installing</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">dependencies</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">for</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">running</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">a</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">python</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span> 
<span class="label"><a 
 id="x1-5005r5"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">RUN</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apt</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">get</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">update</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">&amp;&amp;</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apt</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">get</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">y</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">python3</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">python3</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">pip</span></span> 
<span class="label"><a 
 id="x1-5006r6"></a></span> 
<span class="label"><a 
 id="x1-5007r7"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Copying</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">our</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">into</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">the</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">container</span></span> 
<span class="label"><a 
 id="x1-5008r8"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">COPY</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">app</span></span> 
<span class="label"><a 
 id="x1-5009r9"></a></span> 
<span class="label"><a 
 id="x1-5010r10"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Installing</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">our</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">dependencies</span></span> 
<span class="label"><a 
 id="x1-5011r11"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">RUN</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">pip3</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">r</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">app</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">requirements</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">txt</span></span> 
<span class="label"><a 
 id="x1-5012r12"></a></span> 
<span class="label"><a 
 id="x1-5013r13"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Setting</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">the</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">working</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">directory</span></span> 
<span class="label"><a 
 id="x1-5014r14"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">WORKDIR</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">app</span></span> 
<span class="label"><a 
 id="x1-5015r15"></a></span> 
<span class="label"><a 
 id="x1-5016r16"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Running</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">our</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span> 
<span class="label"><a 
 id="x1-5017r17"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">CMD</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">python3</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">src</span></span><span style="color:#669900"><span 
class="ectt-1200">/</span></span><span style="color:#669900"><span 
class="ectt-1200">app</span></span><span style="color:#669900"><span 
class="ectt-1200">.</span></span><span style="color:#669900"><span 
class="ectt-1200">py</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span>
 
<span class="label"><a 
 id="x1-5018r18"></a></span></pre>
   </div>
<!--l. 99--><p class="indent" >   We see that we are copying in the entire application directory before we install our requirements. We can
improve this so that we only copy in the requirements file and then install the requirements. This means that if we
change our application code we don&#8217;t need to reinstall the requirements.
</p>
   <div class="framedenv" id="code-1">
<!--l. 101--><pre class="listings" id="listing-4"><span class="label"><a 
 id="x1-5019r1"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">syntax</span></span><span style="color:#33997E"><span 
class="ectt-1200">=</span></span><span style="color:#33997E"><span 
class="ectt-1200">docker</span></span><span style="color:#33997E"><span 
class="ectt-1200">/</span></span><span style="color:#33997E"><span 
class="ectt-1200">dockerfile</span></span><span style="color:#33997E"><span 
class="ectt-1200">:1</span></span> 
<span class="label"><a 
 id="x1-5020r2"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">FROM</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ubuntu</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"><span 
class="ectt-1200">latest</span></span> 
<span class="label"><a 
 id="x1-5021r3"></a></span> 
<span class="label"><a 
 id="x1-5022r4"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Installing</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">dependencies</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">for</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">running</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">a</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">python</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span> 
<span class="label"><a 
 id="x1-5023r5"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">RUN</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apt</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">get</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">update</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">&amp;&amp;</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apt</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">get</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">y</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">python3</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">python3</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">pip</span></span> 
<span class="label"><a 
 id="x1-5024r6"></a></span> 
<span class="label"><a 
 id="x1-5025r7"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Copying</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">our</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">into</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">the</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">container</span></span> 
<span class="label"><a 
 id="x1-5026r8"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">COPY</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">requirements</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">txt</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">app</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">requirements</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">txt</span></span> 
<span class="label"><a 
 id="x1-5027r9"></a></span> 
<span class="label"><a 
 id="x1-5028r10"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Installing</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">our</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">dependencies</span></span> 
<span class="label"><a 
 id="x1-5029r11"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">RUN</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">pip3</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">r</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">app</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">requirements</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">txt</span></span> 
<span class="label"><a 
 id="x1-5030r12"></a></span> 
<span class="label"><a 
 id="x1-5031r13"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Copying</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">our</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">into</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">the</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">container</span></span> 
<span class="label"><a 
 id="x1-5032r14"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">COPY</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">src</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">app</span></span> 
<span class="label"><a 
 id="x1-5033r15"></a></span> 
<span class="label"><a 
 id="x1-5034r16"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Setting</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">the</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">working</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">directory</span></span> 
<span class="label"><a 
 id="x1-5035r17"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">WORKDIR</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">app</span></span> 
<span class="label"><a 
 id="x1-5036r18"></a></span> 
<span class="label"><a 
 id="x1-5037r19"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Running</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">our</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">application</span></span> 
<span class="label"><a 
 id="x1-5038r20"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">CMD</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">python3</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">src</span></span><span style="color:#669900"><span 
class="ectt-1200">/</span></span><span style="color:#669900"><span 
class="ectt-1200">app</span></span><span style="color:#669900"><span 
class="ectt-1200">.</span></span><span style="color:#669900"><span 
class="ectt-1200">py</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span>
 
<span class="label"><a 
 id="x1-5039r21"></a></span></pre>
   </div>
<!--l. 124--><p class="indent" >   For the containers we will be building this may not be a large issue, but once your project becomes larger and
you have more dependencies it can become a large time saver.
</p><!--l. 126--><p class="indent" >   To see the layers that are created when you build your Dockerfile you can use the following command:
</p>
   <div class="framedenv" id="code-1">
<!--l. 128--><pre class="listings" id="listing-5"><span class="label"><a 
 id="x1-5040r1"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">docker</span></span><span style="color:#000000"> </span><span style="color:#006699"><span 
class="ectt-1200">history</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-1200">image</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">name</span></span><span style="color:#000000"><span 
class="ectt-1200">&#x003E;</span></span> 
<span class="label"><a 
 id="x1-5041r2"></a></span> 
<span class="label"><a 
 id="x1-5042r3"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">Example</span></span> 
<span class="label"><a 
 id="x1-5043r4"></a></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">docker</span></span><span style="color:#000000"> </span><span style="color:#006699"><span 
class="ectt-1200">history</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ubuntu</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"><span 
class="ectt-1200">latest</span></span>
 
<span class="label"><a 
 id="x1-5044r5"></a></span></pre>
   </div>
<!--l. 136--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.3    </span> <a 
 id="x1-60002.1.3"></a>Image Registries</h5>
<!--l. 138--><p class="noindent" >When we introduced the Dockerfile we glossed over the details of where <span 
class="ectt-1200">ubuntu:latest </span>is being sourced from.
This image is coming from a registry. There are a few different registries that you can use. The default registry is
one hosted by Docker themselves. This is the registry that is used when you don&#8217;t specify a registry and is available
at <a 
href="https://hub.docker.com/" class="url" ><span 
class="ectt-1200">https://hub.docker.com/</span></a>. There are also registries hosted by other companies such as Google
and Amazon. These are available at <a 
href="https://cloud.google.com/container-registry" class="url" ><span 
class="ectt-1200">https://cloud.google.com/container-registry</span></a> and 
<a 
href="https://aws.amazon.com/ecr/" class="url" ><span 
class="ectt-1200">https://aws.amazon.com/ecr/</span></a> respectively.
</p><!--l. 140--><p class="indent" >   As an example the image that we have been using is available at <a 
href="https://hub.docker.com/_/ubuntu" class="url" ><span 
class="ectt-1200">https://hub.docker.com/_/ubuntu</span></a>.
When browsing this page we can also see differnt tags that are available for this image, such as <span 
class="ectt-1200">latest </span>and <span 
class="ectt-1200">20.04</span>.
These tags are used to specify different versions of the image so you can pin your image instead of using the
<span 
class="ectt-1200">latest </span>tag which will always point to the latest version of the image. Note that not all images will have different
tags or even a <span 
class="ectt-1200">latest </span>tag.
</p>
   <hr class="figure" /><div class="figure" 
>
                                                                                                    
                                                                                                    
<a 
 id="x1-6001r2"></a>
                                                                                                    
                                                                                                    
<!--l. 143--><p class="noindent" ><img 
src="images/dockerhub.png" alt="PIC"  
width="525" height="525"  />
<br /> </p><div class="caption" 
><span class="id">Figure&#x00A0;2: </span><span  
class="content">Ubuntu image on Docker Hub</span></div><!--tex4ht:label?: x1-6001r2 -->
                                                                                                    
                                                                                                    
   </div><hr class="endfigure" />
   <h4 class="subsectionHead"><span class="titlemark">2.2    </span> <a 
 id="x1-70002.2"></a>Docker Containers</h4>
   <div class="tcolorbox tcolorbox" id="tcolobox-4">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><!--l. 149--><p class="noindent" >TODO: continue fleshing this out </p> 
</div> 
</div>
<!--l. 151--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.1    </span> <a 
 id="x1-80002.2.1"></a>Docker Networking</h5>
   <div class="tcolorbox tcolorbox" id="tcolobox-5">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><!--l. 153--><p class="noindent" >TODO: continue fleshing this out </p> 
</div> 
</div>
<!--l. 155--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.2    </span> <a 
 id="x1-90002.2.2"></a>Docker Volumes</h5>
   <div class="tcolorbox tcolorbox" id="tcolobox-6">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><!--l. 157--><p class="noindent" >TODO: continue fleshing this out </p> 
</div> 
</div>
<!--l. 159--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.3    </span> <a 
 id="x1-100002.3"></a>Installing Docker</h4>
<!--l. 161--><p class="noindent" >To install docker on your machine you can follow the instructions on the docker website: 
<a 
href="https://docs.docker.com/get-docker/" class="url" ><span 
class="ectt-1200">https://docs.docker.com/get-docker/</span></a>.
</p><!--l. 164--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.4    </span> <a 
 id="x1-110002.4"></a>Running a Docker Container</h4>
<!--l. 167--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3    </span> <a 
 id="x1-120003"></a>Dockerising our Todo Application</h3>
   <div class="tcolorbox tcolorbox" id="tcolobox-7">    
<div class="tcolorbox-title">
<!--l. 171--><p class="indent" >   For the teacher</p></div> 
<div class="tcolorbox-content"><!--l. 171--><p class="noindent" >For this section let the students work through the practical on their own. The content above should
be enough to guide them through the process with the provided instructions.  </p> 
</div> 
</div>
<!--l. 173--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.1    </span> <a 
 id="x1-130003.1"></a>Creating a Dockerfile</h4>
                                                                                                    
                                                                                                    
<!--l. 175--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.2    </span> <a 
 id="x1-140003.2"></a>Building our Docker Image</h4>
<!--l. 177--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.3    </span> <a 
 id="x1-150003.3"></a>Running our Docker Container</h4>
<!--l. 179--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.4    </span> <a 
 id="x1-160003.4"></a>Docker Compose</h4>
<!--l. 181--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.5    </span> <a 
 id="x1-170003.5"></a>Moving to a Postgresql Database</h4>
<!--l. 183--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4    </span> <a 
 id="x1-180004"></a>Testing and Packaging our Application on Commit</h3>
   <div class="tcolorbox tcolorbox" id="tcolobox-8">    
<div class="tcolorbox-title">
<!--l. 187--><p class="indent" >   For the teacher</p></div> 
<div class="tcolorbox-content"><!--l. 187--><p class="noindent" >Here we will describe the basics of CI and how we can use it to test and package our application. Run
through this section and let the students use the provided completed file to get their repos running
the tests and packaging on commit.  </p> 
</div> 
</div>
<!--l. 189--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">4.1    </span> <a 
 id="x1-190004.1"></a>Intro to Continuous Integration</h4>
<!--l. 192--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">4.2    </span> <a 
 id="x1-200004.2"></a>Intro to GitHub Actions</h4>
<!--l. 194--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">4.3    </span> <a 
 id="x1-210004.3"></a>Testing on commit</h4>
                                                                                                    
                                                                                                    
<!--l. 196--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">4.4    </span> <a 
 id="x1-220004.4"></a>Packaging on commit</h4>
<!--l. 1--><p class="noindent" >
</p>
   <h3 class="likesectionHead"><a 
 id="x1-23000"></a>References</h3>
<!--l. 1--><p class="noindent" >
</p>
    
</body></html> 

                                                                                                    


