Last Updated on 2023/03/14      

<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head> <title>Getting Started with the Cloud</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- fn-in,html,htex4ht,xhtml --> 
<meta name="src" content="main.tex" /> 
<link rel="stylesheet" type="text/css" href="main.css" /> 
<link rel="stylesheet" href="https://latex.now.sh/style.css"> 
<link rel="stylesheet" href="/notes.css"> 
<style>body {max-width: 100ch;} 
dl dd {text-align: left}</style> 
</head><body 
>
   <div class="maketitle"><a 
 id="Q1-1-1"></a>
_________________________________________________________________________________________________
<h2 class="titleHead">Getting Started with the Cloud</h2>                                                  Software Architecture
   <div class="date" >March 15, 2023</div>                                                                                                                                                       <div class="author" >Brae
Webb</div>
______________________________________________________________________________________________
   </div>
   <hr class="figure" /><div class="figure" 
>
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
<div class="center" 
>
<!--l. 14--><p class="noindent" >
</p><!--l. 15--><p class="noindent" ><img 
src="images/hextriscloud.png" alt="PIC"  
width="28" height="28"  /></p></div>
                                                                                                    
                                                                                                    
   </div><hr class="endfigure" />
   <h3 class="sectionHead"><span class="titlemark">1    </span> <a 
 id="x1-10001"></a>This Week</h3>
<!--l. 24--><p class="noindent" >This week our goal is to get acquainted with AWS Academy. Throughout the course we will use AWS Academy to
learn how to deploy and manage infrastructure with AWS. Additionally, AWS Academy will be used to develop the
Cloud assignment. Specifically, this week you need to: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 29--><p class="noindent" >Enrol in
           </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-1002x1">
           <!--l. 31--><p class="noindent" >AWS Academy Cloud Foundations [<a 
href="https://awsacademy.instructure.com/courses/40465" >40465</a>] course;
           </p></li>
<li 
  class="enumerate" id="x1-1004x2">
           <!--l. 32--><p class="noindent" >AWS Academy Learner Lab [<a 
href="https://awsacademy.instructure.com/courses/40466" >40046</a>] course; and
           </p></li>
<li 
  class="enumerate" id="x1-1006x3">
           <!--l. 33--><p class="noindent" >AWS Academy Cloud Architecting [<a 
href="https://awsacademy.instructure.com/courses/40046" >40466</a>] course.</p></li></ol>
      </li>
      <li class="itemize">
      <!--l. 35--><p class="noindent" >Navigate the AWS Academy interface.
      </p></li>
      <li class="itemize">
      <!--l. 36--><p class="noindent" >Enter the AWS Console from an AWS Academy lab.
      </p></li>
      <li class="itemize">
      <!--l. 37--><p class="noindent" >Provision an EC2 instance that deploys a simple static website.</p></li></ul>
<!--l. 40--><p class="indent" >   We will then start using an Infrastructure as Code tool, specifically, Terraform, to deploy the static website
instead of using the AWS Console. Specifically, this week you need to: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 45--><p class="noindent" >Authenticate Terraform to use the AWS learner lab.
      </p></li>
      <li class="itemize">
      <!--l. 46--><p class="noindent" >Configure a single server website in Terraform and deploy.
      </p></li>
      <li class="itemize">
      <!--l. 47--><p class="noindent" >Create a Terraform module for deploying arbitrary single server websites.</p></li></ul>
                                                                                                    
                                                                                                    
<!--l. 50--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2    </span> <a 
 id="x1-20002"></a>AWS Academy</h3>
<!--l. 51--><p class="noindent" >AWS Academy is an educational platform to support teaching AWS services. In this course, we will be using it in
two ways:
      </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-2002x1">
      <!--l. 54--><p class="noindent" >The AWS Cloud Foundations and AWS Cloud Architecting courses will be used as supplementary
      material to help cement your ability to use AWS. The use of these courses is optional.
      </p></li>
<li 
  class="enumerate" id="x1-2004x2">
      <!--l. 56--><p class="noindent" >The AWS Learner Lab provides access to an environment which will be used in these practicals to
      learn AWS. Later Learn Labs will be used to develop your Cloud assignment.</p></li></ol>
<!--l. 60--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3    </span> <a 
 id="x1-30003"></a>Enrol in AWS Academy</h3>
<!--l. 62--><p class="noindent" >
      </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-3002x1">
      <!--l. 64--><p class="noindent" >Set up your AWS Academy account by responding to your email invitation and clicking <span 
class="Cabin-Bold-tlf-t1-x-x-120">Get Started</span>.
      The email invitation will come from AWS Academy. Check your junk/spam folders.
      </p><!--l. 68--><p class="noindent" ><img 
src="images/email-invite.png" alt="PIC"  
 />
      </p></li>
<li 
  class="enumerate" id="x1-3004x2">
      <!--l. 70--><p class="noindent" >Go to <a 
href="https://www.awsacademy.com/vforcesite/LMS_Login" class="url" ><span 
class="ectt-1200">https://www.awsacademy.com/vforcesite/LMS_Login</span></a> to login.
           </p><ol  class="enumerate2" >
<li 
  class="enumerate" id="x1-3006x1">
           <!--l. 72--><p class="noindent" >Press <span 
class="Cabin-Bold-tlf-t1-x-x-120">Student Login</span>.
           </p></li>
<li 
  class="enumerate" id="x1-3008x2">
           <!--l. 73--><p class="noindent" >Use the email address that received the email invitation.</p></li></ol>
      <!--l. 76--><p class="noindent" ><img 
src="images/labs-login.png" alt="PIC"  
width="393" height="394"  /></p></li></ol>
                                                                                                    
                                                                                                    
<!--l. 80--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4    </span> <a 
 id="x1-40004"></a>Exploring the Interface</h3>
   <div class="tcolorbox tcolorbox" id="tcolobox-1">    
<div class="tcolorbox-title">
<!--l. 81--><p class="indent" >   Aside</p></div> 
<div class="tcolorbox-content"><!--l. 81--><p class="noindent" >We will just be looking at the learner lab today, please ask on the Slack if you need help using the
supplementary AWS Academy courses. </p> 
</div> 
</div>
<!--l. 83--><p class="noindent" >The following steps will enter the learner lab:
</p><!--l. 85--><p class="indent" >
      </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-4002x1">
      <!--l. 87--><p class="noindent" >Once you have enrolled in the course, you should see this course page (minus everything in pink):
      </p><!--l. 89--><p class="noindent" ><img 
src="images/academy-homepage.png" alt="PIC"  
width="472" height="472"  />
      </p></li>
<li 
  class="enumerate" id="x1-4004x2">
      <!--l. 91--><p class="noindent" >Navigate to the <span 
class="ectt-1200">Modules </span>tab and select the link for &#8220;Learner Lab&#8221;. You may also open and browse the
      &#8220;Student Guide.pdf&#8221; link which covers some of the content of this practical.
      </p><!--l. 94--><p class="noindent" ><img 
src="images/modules-page.png" alt="PIC"  
width="472" height="472"  />
      </p></li>
<li 
  class="enumerate" id="x1-4006x3">
      <!--l. 96--><p class="noindent" >Now we have entered the main part of the interface, the learner lab. </p>
           <ul class="itemize1">
           <li class="itemize">
           <!--l. 98--><p class="noindent" >The AWS text with the (currently) red circle is the link to open the AWS console.
           </p></li>
           <li class="itemize">
           <!--l. 99--><p class="noindent" >You also see your budget, note that the budget is not updated in real-time, so avoid creating
           multiple resources at once.
           </p></li>
           <li class="itemize">
           <!--l. 100--><p class="noindent" >The <span 
class="ectt-1200">00:00 </span>is a countdown of hours remaining for your lab. A lab can only remain active for 4
           hours, after which it will be closed, unless you press start lab again before the 4 hours expires.
           Once the lab is started, <span 
class="ectt-1200">00:00 </span>will change to <span 
class="ectt-1200">04:00</span>.
           </p></li>
           <li class="itemize">
           <!--l. 103--><p class="noindent" >AWS details will become important later but are not needed now.
           </p></li>
           <li class="itemize">
           <!--l. 104--><p class="noindent" >The README button will re-open the text panel currently on the right of the terminal interface.
           </p></li>
           <li class="itemize">
           <!--l. 105--><p class="noindent" >The right-hand has a lot of important information including what AWS services are available in
           the learner labs environment, please read it.
                                                                                                    
                                                                                                    
           </p></li>
           <li class="itemize">
           <!--l. 106--><p class="noindent" >The  terminal  interface  is  a  environment  with  the  SSH  keys  required  to  connect  to  AWS
           instances semi-automatically (we will use this today).</p></li></ul>
      <!--l. 109--><p class="noindent" ><img 
src="images/lab-interface.png" alt="PIC"  
width="472" height="472"  />
      </p></li>
<li 
  class="enumerate" id="x1-4008x4">
      <!--l. 111--><p class="noindent" >Go ahead and start the lab. It will take a few moments to get ready and the red/yellow circle will turn
      green once it is. Click on the green circle when it is available. This will open the AWS Console
      in a new tab. If you end up working for a company which uses AWS, welcome to your new
      home.
      </p><!--l. 118--><p class="noindent" ><img 
src="images/aws-console.png" alt="PIC"  
width="472" height="472"  />
</p>
      </li></ol>
   <div class="tcolorbox tcolorbox" id="tcolobox-2">    
<div class="tcolorbox-title">
<!--l. 129--><p class="indent" >   Aside</p></div> 
<div class="tcolorbox-content"><!--l. 129--><p class="noindent" >A short introduction to AWS: Amazon Web Services (AWS) is an Infrastructure as a Service (IaaS)
and Software as a Service (SaaS) provider. They offer a collection of services which are helpful for
development. For example, they offer virtual compute resources, database storage options, and
networking to tie it all together. Services are offered with a pay as you go model, meaning you only
pay for the seconds you use a service. We will get acquainted with some simple services offered by
AWS now. </p> 
</div> 
</div>
<!--l. 131--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5    </span> <a 
 id="x1-50005"></a>AWS EC2</h3>
<!--l. 133--><p class="noindent" >Today we are going to focus on using AWS&#8217;s EC2 service. Elastic Compute Cloud (EC2) is the primary compute
service offered by AWS. It allows you to create virtual machines on Amazon&#8217;s infrastructure. You have full control
over this machine and can configure it for whatever purpose you need.
</p><!--l. 138--><p class="indent" >   Navigate to the search bar in the top left and find the EC2 service. You might find this interface overwhelming.
It is important to note that since EC2 is one of the primary services offered by AWS, many smaller services we do
not need are bundled into the service.
</p><!--l. 146--><p class="indent" >   <img 
src="images/ec2-interface.png" alt="PIC"  
width="472" height="472"  />
</p><!--l. 149--><p class="indent" >   Today, we will just need the <span 
class="ectt-1200">Instances </span>dashboard. Navigate to there and select &#8220;Launch instances&#8221;.
</p><!--l. 152--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.1    </span> <a 
 id="x1-60005.1"></a>EC2 AMI</h4>
<!--l. 153--><p class="noindent" >First we will need to select an Amazon Machine Image (AMI). An AMI is the template (cookie cutter) which
provides instructions on how an instance should be provisioned. Amazon offers a range of built-in AMIs. There are
also community AMIs or you can create your own. As we just want a simple server today, we will use one of the
built-in AMIs.
                                                                                                    
                                                                                                    
</p><!--l. 158--><p class="indent" >   Every AMI has a unique AMI code, something that looks like <span 
class="ectt-1200">ami-005f9685cb30f234b</span>. We will use this
AMI today, it is considered one of the fundamental images. Search for it via the code and select
it.
</p><!--l. 166--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.2    </span> <a 
 id="x1-70005.2"></a>Instance Settings</h4>
<!--l. 167--><p class="noindent" >The next few settings for configuring your instance are:
      </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-7002x1">
      <!--l. 169--><p class="noindent" >Add a &#8216;Name&#8217; tag, call it the name of your website, e.g. <span 
class="ectt-1200">hextris</span>.
      </p></li>
<li 
  class="enumerate" id="x1-7004x2">
      <!--l. 170--><p class="noindent" >Select an appropriate AMI, <span 
class="ectt-1200">ami-005f9685cb30f234b</span>.
      </p></li>
<li 
  class="enumerate" id="x1-7006x3">
      <!--l. 171--><p class="noindent" >We do not need a large server, choose <span 
class="ectt-1200">t2.micro</span>.
      </p></li>
<li 
  class="enumerate" id="x1-7008x4">
      <!--l. 172--><p class="noindent" >Select the existing <span 
class="ectt-1200">vockey | RSA </span>Key pair option.
      </p></li>
<li 
  class="enumerate" id="x1-7010x5">
      <!--l. 173--><p class="noindent" >Choose &#8216;Create security group&#8217; and tick Allow SSH traffic, HTTPS, and HTTP access from everywhere.
      </p></li>
<li 
  class="enumerate" id="x1-7012x6">
      <!--l. 174--><p class="noindent" >Keep the &#8216;Configure Storage&#8217; settings as default.  </p></li></ol>
<!--l. 178--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">6    </span> <a 
 id="x1-80006"></a>Accessing the Instance</h3>
<!--l. 180--><p class="noindent" >Return to the <span 
class="ectt-1200">Instances </span>dashboard. You should now see a new instance created, its instance state might not yet
be <span 
class="ectt-1200">Running</span>, if not, wait.
</p><!--l. 184--><p class="indent" >   <img 
src="images/instance-interface.png" alt="PIC"  
width="472" height="472"  />
</p><!--l. 186--><p class="indent" >   Note the public IPv4 address as we will need to use this to connect to the server.
</p><!--l. 188--><p class="indent" >
                                                                                                    
                                                                                                    
      </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-8002x1">
      <!--l. 189--><p class="noindent" >Return to the AWS Learner Lab interface.
      </p></li>
<li 
  class="enumerate" id="x1-8004x2">
      <!--l. 190--><p class="noindent" >Run the following, <span id="textcolor1">replacing <span 
class="ectt-1200">127.0.0.1</span></span> with the public IP of your instance. This command uses the
      <span 
class="ectt-1200">vockey | RSA </span>key pair to gain SSH access to the machine.</p></li></ol>
<div class="framedenv" id="shaded*-1">
   <!--l. 193-->
<pre class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-8005r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ssh</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">i</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">~/.</span></span><span style="color:#000000"><span 
class="ectt-1200">ssh</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">labsuser</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">pem</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ec2</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">user@127</span></span><span style="color:#000000"><span 
class="ectt-1200">.0.0.1</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 195--><p class="indent" >   Example:       </p><div class="framedenv" id="code-1">
<!--l. 196--><pre class="listings" id="listing-2"><span class="label"><a 
 id="x1-8006r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">ddd_v1_644362@runweb75312</span></span><span style="color:#000000"><span 
class="ectt-1200">:~</span></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ssh</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">i</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">~/.</span></span><span style="color:#000000"><span 
class="ectt-1200">ssh</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">labsuser</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">pem</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ec2</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">user@35</span></span><span style="color:#000000"><span 
class="ectt-1200">.173.230.42</span></span> 
<span class="label"><a 
 id="x1-8007r2"></a></span><span style="color:#000000"><span 
class="ectt-1200">The</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">authenticity</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">of</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">host</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="tctt-1200">'</span></span><span style="color:#669900"><span 
class="ectt-1200">35.173.230.42</span></span><span style="color:#669900"> </span><span style="color:#669900"><span 
class="ectt-1200">(35.173.230.42)</span></span><span style="color:#669900"><span 
class="tctt-1200">'</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">can</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">not</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">be</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">established</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span> 
<span class="label"><a 
 id="x1-8008r3"></a></span><span style="color:#000000"><span 
class="ectt-1200">ECDSA</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">key</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">fingerprint</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">is</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">SHA256</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"><span 
class="ectt-1200">W7OzzZm6nhwM9tB9Kb7enONPryo1a4259hJmSAZX7HQ</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span> 
<span class="label"><a 
 id="x1-8009r4"></a></span><span style="color:#000000"><span 
class="ectt-1200">Are</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">you</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">sure</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">you</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">want</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#006699"><span 
class="ectt-1200">continue</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">connecting</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">(</span></span><span style="color:#000000"><span 
class="ectt-1200">yes</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">no</span></span><span style="color:#000000"><span 
class="ectt-1200">)</span></span><span style="color:#000000"><span 
class="ectt-1200">?</span></span> 
<span class="label"><a 
 id="x1-8010r5"></a></span> 
<span class="label"><a 
 id="x1-8011r6"></a></span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">At</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">this</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">point</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">you</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">will</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">want</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">to</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">type</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">yes</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">and</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">press</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">enter</span></span> 
<span class="label"><a 
 id="x1-8012r7"></a></span><span style="color:#000000"><span 
class="ectt-1200">Warning</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Permanently</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">added</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="tctt-1200">'</span></span><span style="color:#669900"><span 
class="ectt-1200">35.173.230.42</span></span><span style="color:#669900"><span 
class="tctt-1200">'</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">(</span></span><span style="color:#000000"><span 
class="ectt-1200">ECDSA</span></span><span style="color:#000000"><span 
class="ectt-1200">)</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">the</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">list</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">of</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">known</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">hosts</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span> 
<span class="label"><a 
 id="x1-8013r8"></a></span> 
<span class="label"><a 
 id="x1-8014r9"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">__</span></span><span style="color:#000000"><span 
class="ectt-1200">|</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">__</span></span><span style="color:#000000"><span 
class="ectt-1200">|</span></span><span style="color:#000000"><span 
class="ectt-1200">_</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">)</span></span> 
<span class="label"><a 
 id="x1-8015r10"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">_</span></span><span style="color:#000000"><span 
class="ectt-1200">|</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">(</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Amazon</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Linux</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">2</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">AMI</span></span> 
<span class="label"><a 
 id="x1-8016r11"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">___</span></span><span style="color:#000000"><span 
class="ectt-1200">|\</span></span><span style="color:#000000"><span 
class="ectt-1200">___</span></span><span style="color:#000000"><span 
class="ectt-1200">|</span></span><span style="color:#000000"><span 
class="ectt-1200">___</span></span><span style="color:#000000"><span 
class="ectt-1200">|</span></span> 
<span class="label"><a 
 id="x1-8017r12"></a></span> 
<span class="label"><a 
 id="x1-8018r13"></a></span><span style="color:#000000"><span 
class="ectt-1200">https</span></span><span style="color:#000000"><span 
class="ectt-1200">://</span></span><span style="color:#000000"><span 
class="ectt-1200">aws</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">amazon</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">com</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">amazon</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">linux</span></span><span style="color:#000000"><span 
class="ectt-1200">-2/</span></span> 
<span class="label"><a 
 id="x1-8019r14"></a></span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#000000"><span 
class="ectt-1200">ec2</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">user@ip</span></span><span style="color:#000000"><span 
class="ectt-1200">-172-31-53-4</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">~]</span></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span>
 
<span class="label"><a 
 id="x1-8020r15"></a></span></pre>
   </div>
<!--l. 213--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">7    </span> <a 
 id="x1-90007"></a>Installing Hextris</h3>
<!--l. 214--><p class="noindent" >Hextris is very simple to install, using an EC2 interface is perhaps overkill for it. It is an entirely client-side/static
web application which means we just have to serve the static files.
</p><!--l. 217--><p class="indent" >   First, we will need to enable serving of static files. We can install and start the <span 
class="ectt-1200">httpd </span>service for this. The AMI
we have picked uses the yum package manager, so to install httpd we run:
</p>
   <div class="framedenv" id="code-1">
<!--l. 221--><pre class="listings" id="listing-3"><span class="label"><a 
 id="x1-9001r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">&#x003E;</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">sudo</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">yum</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span> 
<span class="label"><a 
 id="x1-9002r2"></a></span><span style="color:#000000"><span 
class="ectt-1200">Loaded</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">plugins</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">extras_suggestions</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">langpacks</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">priorities</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">update</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">motd</span></span> 
<span class="label"><a 
 id="x1-9003r3"></a></span><span style="color:#000000"><span 
class="ectt-1200">Resolving</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Dependencies</span></span> 
<span class="label"><a 
 id="x1-9004r4"></a></span><span style="color:#000000"><span 
class="ectt-1200">.....</span></span> 
<span class="label"><a 
 id="x1-9005r5"></a></span><span style="color:#000000"><span 
class="ectt-1200">.....</span></span> 
<span class="label"><a 
 id="x1-9006r6"></a></span><span style="color:#000000"><span 
class="ectt-1200">Total</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">download</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">size</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">1.9</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">M</span></span> 
<span class="label"><a 
 id="x1-9007r7"></a></span><span style="color:#000000"><span 
class="ectt-1200">Installed</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">size</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">5.2</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">M</span></span> 
<span class="label"><a 
 id="x1-9008r8"></a></span><span style="color:#000000"><span 
class="ectt-1200">Is</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">this</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ok</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#000000"><span 
class="ectt-1200">y</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">d</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">N</span></span><span style="color:#000000"><span 
class="ectt-1200">]:</span></span> 
<span class="label"><a 
 id="x1-9009r9"></a></span> 
<span class="label"><a 
 id="x1-9010r10"></a></span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">enter</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">y</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">to</span></span><span style="color:#33997E"> </span><span style="color:#33997E"><span 
class="ectt-1200">install</span></span> 
<span class="label"><a 
 id="x1-9011r11"></a></span><span style="color:#000000"><span 
class="ectt-1200">.....</span></span> 
<span class="label"><a 
 id="x1-9012r12"></a></span><span style="color:#000000"><span 
class="ectt-1200">.....</span></span> 
<span class="label"><a 
 id="x1-9013r13"></a></span><span style="color:#000000"><span 
class="ectt-1200">Complete</span></span><span style="color:#000000"><span 
class="ectt-1200">!</span></span> 
<span class="label"><a 
 id="x1-9014r14"></a></span><span style="color:#000000"><span 
class="ectt-1200">&#x003E;</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">sudo</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">systemctl</span></span><span style="color:#000000"> </span><span style="color:#006699"><span 
class="ectt-1200">enable</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span> 
<span class="label"><a 
 id="x1-9015r15"></a></span><span style="color:#000000"><span 
class="ectt-1200">Created</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">symlink</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">from</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">etc</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">systemd</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">system</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">multi</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">user</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">target</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">wants</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">service</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">usr</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">lib</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">systemd</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">system</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">service</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span> 
<span class="label"><a 
 id="x1-9016r16"></a></span><span style="color:#000000"><span 
class="ectt-1200">&#x003E;</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">sudo</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">systemctl</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">start</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span>
 
<span class="label"><a 
 id="x1-9017r17"></a></span></pre>
   </div>
<!--l. 240--><p class="indent" >   All files in the <span 
class="ectt-1200">/var/www/html </span>directory will now be served when accessed via HTTP. Navigate to the public IP
address of your EC2 instance in the browser. You should see the Apache test page.
</p><!--l. 244--><p class="indent" >   Change to the <span 
class="ectt-1200">/var/www/html </span>directory and notice that it is currently empty. We need to download the static
files to this directory so that they can be served. We can use git for this (though it is not the most suited tool), but
first git needs to be installed on the machine.
</p>
   <div class="framedenv" id="shaded*-1">
   <!--l. 249-->
<pre class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-9018r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">sudo</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">yum</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">git</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 251--><p class="indent" >   Finally, let&#8217;s double check we are in the <span 
class="ectt-1200">/var/www/html </span>directory.
</p>
                                                                                                    
                                                                                                    
   <div class="framedenv" id="shaded*-1">
   <!--l. 253-->
<pre class="lstlisting" id="listing-5"><span class="label"><a 
 id="x1-9019r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">cd</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">var</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">www</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">html</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 257--><p class="indent" >   And clone the repository into that directory.
</p>
   <div class="framedenv" id="shaded*-1">
   <!--l. 259-->
<pre class="lstlisting" id="listing-6"><span class="label"><a 
 id="x1-9020r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">sudo</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">git</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">clone</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">https</span></span><span style="color:#000000"><span 
class="ectt-1200">://</span></span><span style="color:#000000"><span 
class="ectt-1200">github</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">com</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">Hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 264--><p class="indent" >   Now if you navigate to the <span 
class="Cabin-Bold-tlf-t1-x-x-120">http </span>address of the public IP address (e.g. <a 
href="http://18.208.165.253" class="url" ><span 
class="ectt-1200">http://18.208.165.253</span></a>), you should
be able to see your newly deployed website. Congradulations!
</p>
   <div class="tcolorbox tcolorbox" id="tcolobox-3">    
<div class="tcolorbox-title">
<!--l. 268--><p class="indent" >   Notice</p></div> 
<div class="tcolorbox-content"><!--l. 268--><p class="noindent" >If you&#8217;re having timeout issues, one problem could be using <span 
class="ectt-1200">https </span>to connect rather than <span 
class="ectt-1200">http</span>. </p> 
</div> 
</div>
<!--l. 272--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">8    </span> <a 
 id="x1-100008"></a>Switching to Terraform</h3>
<!--l. 274--><p class="noindent" >For the remainder of the practical we will be using Terraform to provision the same instance we just
created.
</p><!--l. 276--><p class="indent" >
      </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-10002x1">
      <!--l. 277--><p class="noindent" >First, please delete any running instances in your AWS account using the AWS Console.
      </p></li>
<li 
  class="enumerate" id="x1-10004x2">
      <!--l. 278--><p class="noindent" >Next, navigate to the GitHub Classroom link for this practical provided by your tutor in Slack. This will
      create a new repository where we can work on Terraform.</p></li></ol>
<!--l. 282--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">9    </span> <a 
 id="x1-110009"></a>Using Terraform in AWS Learner Labs</h3>
<!--l. 283--><p class="noindent" >We will now redeploy our Hextris application but use Infrastructure As Code (IaC) to do so. You will
need to keep your lab running for the next steps (now is a good time to click start to refresh your 4
hours).
</p><!--l. 287--><p class="indent" >
                                                                                                    
                                                                                                    
      </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-11002x1">
      <!--l. 288--><p class="noindent" >Click on &#8216;AWS Details&#8217; to display information about the lab.
      </p><!--l. 290--><p class="noindent" ><img 
src="images/aws-details.png" alt="PIC"  
width="367" height="367"  />
      </p></li>
<li 
  class="enumerate" id="x1-11004x2">
      <!--l. 292--><p class="noindent" >Click  on  the  first  &#8216;Show&#8217;  button  next  to  &#8216;AWS  CLI&#8217;  which  will  display  a  text  block  starting  with
      <span 
class="ectt-1200">[default]</span>.
      </p></li>
<li 
  class="enumerate" id="x1-11006x3">
      <!--l. 293--><p class="noindent" >Within your repository create a <span 
class="ectt-1200">credentials </span>file and copy the contents of the text block into the
      file. <span 
class="Cabin-Bold-tlf-t1-x-x-120">Do not share this file contents &#8212; do not commit it</span>. This file is added to the <span 
class="ectt-1200">.gitignore </span>of your
      repository by default.
      </p></li>
<li 
  class="enumerate" id="x1-11008x4">
      <!--l. 296--><p class="noindent" >Create a <span 
class="ectt-1200">main.tf </span>file in the same directory with the following contents:    </p><div class="framedenv" id="code-1">
      <!--l. 297--><p class="noindent" ><span 
class="ectt-1200">» cat main.tf</span> </p></div>   <div class="framedenv" id="code-1"><!--l. 297--><pre class="listings" id="listing-7"><span class="label"><a 
 id="x1-11009r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#006699"><span 
class="ectt-1200">terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-11010r2"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">2</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#006699"><span 
class="ectt-1200">required_providers</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-11011r3"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">3</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">aws</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-11012r4"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">4</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">source</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">hashicorp</span></span><span style="color:#669900"><span 
class="ectt-1200">/</span></span><span style="color:#669900"><span 
class="ectt-1200">aws</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-11013r5"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">5</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">version</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">~&#x003E;</span></span><span style="color:#669900"> </span><span style="color:#669900"><span 
class="ectt-1200">4.0</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-11014r6"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">6</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-11015r7"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">7</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-11016r8"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-11017r9"></a></span> 
<span class="label"><a 
 id="x1-11018r10"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">10</span></span><span style="color:#006699"><span 
class="ectt-1200">provider</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">aws</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-11019r11"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">11</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">region</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">us</span></span><span style="color:#669900"><span 
class="ectt-1200">-</span></span><span style="color:#669900"><span 
class="ectt-1200">east</span></span><span style="color:#669900"><span 
class="ectt-1200">-1</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-11020r12"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">12</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">shared_credentials_files</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">./</span></span><span style="color:#669900"><span 
class="ectt-1200">credentials</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-11021r13"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">13</span></span><span style="color:#000000"><span 
class="ectt-1200">}</span></span>
       
<span class="label"><a 
 id="x1-11022r14"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">14 </span></span></pre>
      </div>
      <!--l. 313--><p class="noindent" >The <span 
class="ectt-1200">terraform </span>block specifies the required external dependencies, here we need to use the AWS provider
      above version 4.0. The <span 
class="ectt-1200">provider </span>block configures the AWS provider, instructing it which region to use and
      how to authenticate (using the credentials file we created).
      </p></li>
<li 
  class="enumerate" id="x1-11024x5">
      <!--l. 316--><p class="noindent" >We need to initialise terraform which will download the required dependencies. This is done with the
      <span 
class="ectt-1200">terraform init </span>command.  </p><div class="framedenv" id="shaded*-1">
      <!--l. 318-->
      <pre class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-11025r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">init</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
      
      </div>
      <!--l. 320--><p class="noindent" >This command will create a <span 
class="ectt-1200">.terraform </span>directory which stores providers and a provider lock file,
      <span 
class="ectt-1200">.terraform.lock.hcl</span>.
      </p></li>
<li 
  class="enumerate" id="x1-11027x6">
      <!--l. 322--><p class="noindent" >To verify that we have setup Terraform correctly, use <span 
class="ectt-1200">terraform plan</span>.  </p><div class="framedenv" id="shaded*-1">
      <!--l. 323-->
                                                                                                    
                                                                                                    
      <pre class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-11028r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">plan</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
      
      </div>
      <!--l. 325--><p class="noindent" >As we currently have no resources configured, it should find that no changes are required. Note that this
      does not ensure our credentials are correctly configured as Terraform has no reason to try authenticating
      yet.
</p>
      </li></ol>
<!--l. 330--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">10    </span> <a 
 id="x1-1200010"></a>Deploying Hextris</h3>
<!--l. 331--><p class="noindent" >First, we will need to create an EC2 instance resource. The AWS provider calls this resource an
<a 
href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance" ><span 
class="ectt-1200">aws_instance</span></a><span class="footnote-mark"><a 
href="#fn1x0" id="fn1x0-bk"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-12001f1"></a>.
Get familiar with the documentation page. Most Terraform providers have reasonable documentation, reading the
argument reference section helps to understand what a resource is capable of.
</p><!--l. 336--><p class="indent" >   We will start off with the basic information for the resource. We configured it to use a specific Amazon
Machine Instance (AMI) and chose the <span 
class="ectt-1200">t2.micro </span>size. We will also give it a name so that it is easy to find. Add the
following basic resource to <span 
class="ectt-1200">main.tf</span>:
</p><!--l. 341--><p class="indent" >   </p><div class="framedenv" id="code-1">
<!--l. 341--><p class="indent" >   <span 
class="ectt-1200">» cat main.tf</span> </p></div>   <div class="framedenv" id="code-1"><!--l. 341--><pre class="listings" id="listing-10"><span class="label"><a 
 id="x1-12003r1"></a></span><span style="color:#006699"><span 
class="ectt-1200">resource</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">hextris</span></span><span style="color:#669900"><span 
class="ectt-1200">-</span></span><span style="color:#669900"><span 
class="ectt-1200">server</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-12004r2"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">ami</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">ami</span></span><span style="color:#669900"><span 
class="ectt-1200">-005</span></span><span style="color:#669900"><span 
class="ectt-1200">f9685cb30f234b</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-12005r3"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">instance_type</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">t2</span></span><span style="color:#669900"><span 
class="ectt-1200">.</span></span><span style="color:#669900"><span 
class="ectt-1200">micro</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-12006r4"></a></span> 
<span class="label"><a 
 id="x1-12007r5"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">tags</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-12008r6"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">Name</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">hextris</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-12009r7"></a></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-12010r8"></a></span><span style="color:#000000"><span 
class="ectt-1200">}</span></span>
 
<span class="label"><a 
 id="x1-12011r9"></a></span></pre>
   </div>
<!--l. 352--><p class="indent" >   To create the server, invoke <span 
class="ectt-1200">terraform apply </span>which will first do <span 
class="ectt-1200">terraform plan </span>and prompt us to confirm if
we want to apply changes.
</p>
   <div class="framedenv" id="shaded*-1">
   <!--l. 355-->
<pre class="lstlisting" id="listing-11"><span class="label"><a 
 id="x1-12012r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apply</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 357--><p class="indent" >   You should be prompted with something similar to the output below.
</p>
   <div class="framedenv" id="code-1">
<!--l. 359--><pre class="listings" id="listing-12"><span class="label"><a 
 id="x1-12013r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="ectt-1200">Terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">used</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">the</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">selected</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">providers</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">generate</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">the</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">following</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">execution</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">plan</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Resource</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">actions</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">are</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">indicated</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">with</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">the</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">following</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">symbols</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span> 
<span class="label"><a 
 id="x1-12014r2"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">2</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">+</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">create</span></span> 
<span class="label"><a 
 id="x1-12015r3"></a></span> 
<span class="label"><a 
 id="x1-12016r4"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="ectt-1200">Terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">will</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">perform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">the</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">following</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">actions</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span> 
<span class="label"><a 
 id="x1-12017r5"></a></span> 
<span class="label"><a 
 id="x1-12018r6"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">6</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">#</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">will</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">be</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">created</span></span> 
<span class="label"><a 
 id="x1-12019r7"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">7</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">+</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">resource</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-12020r8"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">8</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">+</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">ami</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">ami</span></span><span style="color:#000000"><span 
class="ectt-1200">-005</span></span><span style="color:#000000"><span 
class="ectt-1200">f9685cb30f234b</span></span><span style="color:#000000"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-12021r9"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">9</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">(</span></span><span style="color:#000000"><span 
class="ectt-1200">omitted</span></span><span style="color:#000000"><span 
class="ectt-1200">)</span></span> 
<span class="label"><a 
 id="x1-12022r10"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">10</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">+</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">instance_type</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">t2</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">micro</span></span><span style="color:#000000"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-12023r11"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">11</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">(</span></span><span style="color:#000000"><span 
class="ectt-1200">omitted</span></span><span style="color:#000000"><span 
class="ectt-1200">)</span></span> 
<span class="label"><a 
 id="x1-12024r12"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">12</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">+</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">tags</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-12025r13"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">13</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">+</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">Name</span></span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-12026r14"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">14</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-12027r15"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">15</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-12028r16"></a></span> 
<span class="label"><a 
 id="x1-12029r17"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">17</span></span><span style="color:#000000"><span 
class="ectt-1200">Plan</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">1</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">add</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">0</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">change</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">0</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">destroy</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span> 
<span class="label"><a 
 id="x1-12030r18"></a></span> 
<span class="label"><a 
 id="x1-12031r19"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">19</span></span><span style="color:#000000"><span 
class="ectt-1200">Do</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">you</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">want</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">perform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">these</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">actions</span></span><span style="color:#000000"><span 
class="ectt-1200">?</span></span> 
<span class="label"><a 
 id="x1-12032r20"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">20</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">Terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">will</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">perform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">the</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">actions</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">described</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">above</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span> 
<span class="label"><a 
 id="x1-12033r21"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">21</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">Only</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="tctt-1200">'</span></span><span style="color:#000000"><span 
class="ectt-1200">yes</span></span><span style="color:#000000"><span 
class="tctt-1200">'</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">will</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">be</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">accepted</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">approve</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span> 
<span class="label"><a 
 id="x1-12034r22"></a></span> 
<span class="label"><a 
 id="x1-12035r23"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">23</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">Enter</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">a</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">value</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span>
 
<span class="label"><a 
 id="x1-12036r24"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">24 </span></span></pre>
   </div>
<!--l. 385--><p class="indent" >   If the plan looks sensible enter <span 
class="ectt-1200">yes </span>to enact the changes.
</p>
   <div class="framedenv" id="code-1">
<!--l. 387--><pre class="listings" id="listing-13"><span class="label"><a 
 id="x1-12037r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">Enter</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">a</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">value</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">yes</span></span> 
<span class="label"><a 
 id="x1-12038r2"></a></span> 
<span class="label"><a 
 id="x1-12039r3"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Creating</span></span><span style="color:#000000"><span 
class="ectt-1200">...</span></span> 
<span class="label"><a 
 id="x1-12040r4"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Still</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">creating</span></span><span style="color:#000000"><span 
class="ectt-1200">...</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[10</span></span><span style="color:#000000"><span 
class="ectt-1200">s</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">elapsed</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-12041r5"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Still</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">creating</span></span><span style="color:#000000"><span 
class="ectt-1200">...</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[20</span></span><span style="color:#000000"><span 
class="ectt-1200">s</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">elapsed</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-12042r6"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">6</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Still</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">creating</span></span><span style="color:#000000"><span 
class="ectt-1200">...</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[30</span></span><span style="color:#000000"><span 
class="ectt-1200">s</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">elapsed</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-12043r7"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Still</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">creating</span></span><span style="color:#000000"><span 
class="ectt-1200">...</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[40</span></span><span style="color:#000000"><span 
class="ectt-1200">s</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">elapsed</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-12044r8"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Creation</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">complete</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">after</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">47</span></span><span style="color:#000000"><span 
class="ectt-1200">s</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#000000"><span 
class="ectt-1200">id</span></span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"><span 
class="ectt-1200">i</span></span><span style="color:#000000"><span 
class="ectt-1200">-08</span></span><span style="color:#000000"><span 
class="ectt-1200">c92a097ae7c5b18</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-12045r9"></a></span> 
<span class="label"><a 
 id="x1-12046r10"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">10</span></span><span style="color:#000000"><span 
class="ectt-1200">Apply</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">complete</span></span><span style="color:#000000"><span 
class="ectt-1200">!</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Resources</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">1</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">added</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">0</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">changed</span></span><span style="color:#000000"><span 
class="ectt-1200">,</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">0</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">destroyed</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span>
 
<span class="label"><a 
 id="x1-12047r11"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">11 </span></span></pre>
   </div>
                                                                                                    
                                                                                                    
<!--l. 400--><p class="indent" >   You can now check in the AWS Console that another EC2 instance with the name <span 
class="ectt-1200">hextris </span>has been
created. Now we have got a server, we should try to configure it to serve hextris. We will use the
<span 
class="ectt-1200">user_data </span>field which configures commands to run when launching the instance. First we need a script to
provision the server, if we combine all our commands from the last practical, we will produce this
script:
</p><!--l. 405--><p class="indent" >   </p><div class="framedenv" id="code-1">
<!--l. 405--><p class="indent" >   <span 
class="ectt-1200">» cat serve-hextris.sh</span> </p></div>   <div class="framedenv" id="code-1"><!--l. 405--><pre class="listings" id="listing-14"><span class="label"><a 
 id="x1-12048r1"></a></span><span style="color:#33997E"><span 
class="ectt-1200">#</span></span><span style="color:#33997E"><span 
class="ectt-1200">!/</span></span><span style="color:#33997E"><span 
class="ectt-1200">bin</span></span><span style="color:#33997E"><span 
class="ectt-1200">/</span></span><span style="color:#33997E"><span 
class="ectt-1200">bash</span></span> 
<span class="label"><a 
 id="x1-12049r2"></a></span><span style="color:#000000"><span 
class="ectt-1200">yum</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">y</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span> 
<span class="label"><a 
 id="x1-12050r3"></a></span><span style="color:#000000"><span 
class="ectt-1200">systemctl</span></span><span style="color:#000000"> </span><span style="color:#006699"><span 
class="ectt-1200">enable</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span> 
<span class="label"><a 
 id="x1-12051r4"></a></span><span style="color:#000000"><span 
class="ectt-1200">systemctl</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">start</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">httpd</span></span> 
<span class="label"><a 
 id="x1-12052r5"></a></span> 
<span class="label"><a 
 id="x1-12053r6"></a></span><span style="color:#000000"><span 
class="ectt-1200">yum</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">install</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">y</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">git</span></span> 
<span class="label"><a 
 id="x1-12054r7"></a></span><span style="color:#006699"><span 
class="ectt-1200">cd</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">var</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">www</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">html</span></span> 
<span class="label"><a 
 id="x1-12055r8"></a></span><span style="color:#000000"><span 
class="ectt-1200">git</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">clone</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">https</span></span><span style="color:#000000"><span 
class="ectt-1200">://</span></span><span style="color:#000000"><span 
class="ectt-1200">github</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">com</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">Hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">.</span></span>
 
<span class="label"><a 
 id="x1-12056r9"></a></span></pre>
   </div>
<!--l. 420--><p class="indent" >   Now we can add the following field to our Terraform resource. It uses the Terraform <span 
class="ectt-1200">file </span>function to load the
contents of a file named <span 
class="ectt-1200">serve-hextris.sh </span>relative to the Terraform directory. The contents of that file is passed
to the <span 
class="ectt-1200">user_data </span>field.
</p>
   <div class="framedenv" id="code-1">
<!--l. 424--><pre class="listings" id="listing-15"><span class="label"><a 
 id="x1-12057r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="ectt-1200">user_data</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">file</span></span><span style="color:#000000"><span 
class="ectt-1200">(</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">./</span></span><span style="color:#669900"><span 
class="ectt-1200">serve</span></span><span style="color:#669900"><span 
class="ectt-1200">-</span></span><span style="color:#669900"><span 
class="ectt-1200">hextris</span></span><span style="color:#669900"><span 
class="ectt-1200">.</span></span><span style="color:#669900"><span 
class="ectt-1200">sh</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">)</span></span>
 
<span class="label"><a 
 id="x1-12058r2"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">2 </span></span></pre>
   </div>
<!--l. 428--><p class="indent" >   If you run the <span 
class="ectt-1200">terraform plan </span>command now, you will notice that Terraform has identified that this change
will require creating a new EC2 instance. Where possible, Terraform will try to update a resource in-place
but since this changes how an instance is started, it needs to be replaced. Go ahead and apply the
changes.
</p><!--l. 433--><p class="indent" >   Now, in theory, we should have deployed hextris to an EC2 instance. But how do we access that instance? We
<span 
class="Cabin-Italic-tlf-t1-x-x-120">could </span>go to the AWS Console and find the public IP address. However, it turns out that Terraform already knows
the public IP address. In fact, if you open the Terraform state file (<span 
class="ectt-1200">terraform.tfstate</span>), you should be able to find
it hidden away in there. But we do not want to go hunting through this file all the time. Instead we will use the
<span 
class="ectt-1200">output </span>keyword.
</p><!--l. 442--><p class="indent" >   We can specify certain attributes as &#8216;output&#8217; attributes. Output attributes are printed to the terminal when the
module is invoked directly but as we will see later, they can also be used by other Terraform configuration
files.
</p><!--l. 446--><p class="indent" >   </p><div class="framedenv" id="code-1">
<!--l. 446--><p class="indent" >   <span 
class="ectt-1200">» cat main.tf</span> </p></div>   <div class="framedenv" id="code-1"><!--l. 446--><pre class="listings" id="listing-16"><span class="label"><a 
 id="x1-12059r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#006699"><span 
class="ectt-1200">output</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">hextris</span></span><span style="color:#669900"><span 
class="ectt-1200">-</span></span><span style="color:#669900"><span 
class="ectt-1200">url</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-12060r2"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">2</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">value</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">public_ip</span></span> 
<span class="label"><a 
 id="x1-12061r3"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="ectt-1200">}</span></span>
 
<span class="label"><a 
 id="x1-12062r4"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">4 </span></span></pre>
   </div>
<!--l. 452--><p class="indent" >   This creates a new output attribute, <span 
class="ectt-1200">hextris-url</span>, which references the <span 
class="ectt-1200">public_ip </span>attribute of our
<span 
class="ectt-1200">hextris-server </span>resource. Note that resources in Terraform are addressed by the resource type (<span 
class="ectt-1200">aws_instance</span>)
followed by the name of the resource (<span 
class="ectt-1200">hextris-server</span>).
</p><!--l. 457--><p class="indent" >   If you plan or apply the changes, it should tell you the public IP address of the instance resource.
</p><div class="framedenv" id="shaded*-1">
   <!--l. 458-->
<pre class="lstlisting" id="listing-17"><span class="label"><a 
 id="x1-12063r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">plan</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
   <div class="framedenv" id="code-1">
<!--l. 460--><pre class="listings" id="listing-18"><span class="label"><a 
 id="x1-12064r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_instance</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Refreshing</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">state</span></span><span style="color:#000000"><span 
class="ectt-1200">...</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#000000"><span 
class="ectt-1200">id</span></span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"><span 
class="ectt-1200">i</span></span><span style="color:#000000"><span 
class="ectt-1200">-043</span></span><span style="color:#000000"><span 
class="ectt-1200">a61ff86aa272e0</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-12065r2"></a></span> 
<span class="label"><a 
 id="x1-12066r3"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="ectt-1200">Changes</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">to</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">Outputs</span></span><span style="color:#000000"><span 
class="ectt-1200">:</span></span> 
<span class="label"><a 
 id="x1-12067r4"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">4</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">+</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">url</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">"3.82.225.65"</span></span>
 
<span class="label"><a 
 id="x1-12068r5"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">5 </span></span></pre>
   </div>
<!--l. 467--><p class="indent" >   You can apply this plan to save these new output values to the Terraform state, without changing any real
infrastructure.
</p><!--l. 469--><p class="indent" >   So let&#8217;s try and access that url, hmm. That&#8217;s strange. Something has gone wrong.
                                                                                                    
                                                                                                    
</p><!--l. 472--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">11    </span> <a 
 id="x1-1300011"></a>Security Groups</h3>
<!--l. 473--><p class="noindent" >When we setup our EC2 instance using the AWS Console, it helpful created a new security group for us. We
specified that this security group should allow SSH, HTTP, and HTTPS traffic by allowing traffic from ports 22, 80,
and 443 respectively. When configuring with Terraform, security groups and their attachment to EC2 instances are
separate resources. Refer back to the Terraform documentation for details or, as is normally quicker, <a 
href="https://www.google.com/search?q=terraform+aws+security+group" >Google
&#8220;terraform aws security group&#8221;</a>.
</p><!--l. 480--><p class="indent" >   First, let us create an appropriate security group. Recall that in the AWS Console configuration, ingress SSH access (port
22) and all egress<span class="footnote-mark"><a 
href="#fn2x0" id="fn2x0-bk"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-13001f2"></a>
traffic was automatically configured and we just added ingress port 80. In Terraform the whole state must be
configured so we specify two <span 
class="ectt-1200">ingress </span>blocks one for HTTP (port 80) and one for SSH access (port
22).<span class="footnote-mark"><a 
href="#fn3x0" id="fn3x0-bk"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-13003f3"></a>
Additionally, we will create egress for all outgoing traffic.
</p>
   <div class="framedenv" id="code-1">
<!--l. 491--><pre class="listings" id="listing-19"><span class="label"><a 
 id="x1-13005r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#006699"><span 
class="ectt-1200">resource</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">aws_security_group</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">hextris</span></span><span style="color:#669900"><span 
class="ectt-1200">-</span></span><span style="color:#669900"><span 
class="ectt-1200">server</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-13006r2"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">2</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">name</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">hextris</span></span><span style="color:#669900"><span 
class="ectt-1200">-</span></span><span style="color:#669900"><span 
class="ectt-1200">server</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-13007r3"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">3</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">description</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">Hextris</span></span><span style="color:#669900"> </span><span style="color:#669900"><span 
class="ectt-1200">HTTP</span></span><span style="color:#669900"> </span><span style="color:#669900"><span 
class="ectt-1200">and</span></span><span style="color:#669900"> </span><span style="color:#669900"><span 
class="ectt-1200">SSH</span></span><span style="color:#669900"> </span><span style="color:#669900"><span 
class="ectt-1200">access</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-13008r4"></a></span> 
<span class="label"><a 
 id="x1-13009r5"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">5</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">ingress</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-13010r6"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">6</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">from_port</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">80</span></span> 
<span class="label"><a 
 id="x1-13011r7"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">7</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">to_port</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">80</span></span> 
<span class="label"><a 
 id="x1-13012r8"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">8</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">protocol</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">tcp</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-13013r9"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">9</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">cidr_blocks</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">0.0.0.0/0</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-13014r10"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">10</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-13015r11"></a></span> 
<span class="label"><a 
 id="x1-13016r12"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">12</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">ingress</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-13017r13"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">13</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">from_port</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">22</span></span> 
<span class="label"><a 
 id="x1-13018r14"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">14</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">to_port</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">22</span></span> 
<span class="label"><a 
 id="x1-13019r15"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">15</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">protocol</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">tcp</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-13020r16"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">16</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">cidr_blocks</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">0.0.0.0/0</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-13021r17"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">17</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-13022r18"></a></span> 
<span class="label"><a 
 id="x1-13023r19"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">19</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">egress</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">{</span></span> 
<span class="label"><a 
 id="x1-13024r20"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">20</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">from_port</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">0</span></span> 
<span class="label"><a 
 id="x1-13025r21"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">21</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">to_port</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">0</span></span> 
<span class="label"><a 
 id="x1-13026r22"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">22</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">protocol</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">-1</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span> 
<span class="label"><a 
 id="x1-13027r23"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">23</span></span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">cidr_blocks</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#669900"><span 
class="ectt-1200">0.0.0.0/0</span></span><span style="color:#669900"><span 
class="ectt-1200">"</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span> 
<span class="label"><a 
 id="x1-13028r24"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">24</span></span><span 
class="ectt-1200">&#x00A0;</span><span style="color:#000000"><span 
class="ectt-1200">}</span></span> 
<span class="label"><a 
 id="x1-13029r25"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">25</span></span><span style="color:#000000"><span 
class="ectt-1200">}</span></span>
 
<span class="label"><a 
 id="x1-13030r26"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">26 </span></span></pre>
   </div>
<!--l. 519--><p class="indent" >   Note the following: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 521--><p class="noindent" ><span 
class="ectt-1200">from_port </span>and <span 
class="ectt-1200">to_port </span>are the start and end of a range of ports rather than incoming or outgoing.
      In this example our range is 80-80.
      </p></li>
      <li class="itemize">
      <!--l. 522--><p class="noindent" ><span 
class="ectt-1200">protocol </span>set to -1 is a special flag to indicate all protocols.
      </p></li>
      <li class="itemize">
      <!--l. 523--><p class="noindent" >Explaining <span 
class="ectt-1200">cidr </span>is outside the scope of the course, but the specified block above means to apply to
      all IP addresses.</p></li></ul>
<!--l. 526--><p class="indent" >   You may now apply the changes to create this new security group resource.
</p><!--l. 528--><p class="indent" >   Next, we will attach the security group to the EC2 instance. Return to the <span 
class="ectt-1200">aws_instance.hextrix-server</span>
resource and include the following line:
</p>
   <div class="framedenv" id="code-1">
<!--l. 532--><pre class="listings" id="listing-20"><span class="label"><a 
 id="x1-13031r1"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="ectt-1200">security_groups</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">=</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">[</span></span><span style="color:#000000"><span 
class="ectt-1200">aws_security_group</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">hextris</span></span><span style="color:#000000"><span 
class="ectt-1200">-</span></span><span style="color:#000000"><span 
class="ectt-1200">server</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">name</span></span><span style="color:#000000"><span 
class="ectt-1200">]</span></span>
 
<span class="label"><a 
 id="x1-13032r2"></a><span 
class="Cabin-Regular-tlf-t1-x-x-60">2 </span></span></pre>
   </div>
<!--l. 536--><p class="indent" >   Note that EC2 instances can have multiple security groups. Once again notice the structure of resource
identifiers in AWS.
</p><!--l. 543--><p class="indent" >   Now apply the changes. If you now try to access via the IP address (the IP address may have changed), you
should be able to view the hextris website.
                                                                                                    
                                                                                                    
</p><!--l. 548--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">12    </span> <a 
 id="x1-1400012"></a>Tearing Down</h3>
<!--l. 550--><p class="noindent" >One of the important features of Infrastructure as Code (IaC) is all the configuration we just did is stored in a file.
This file can, and should be, version controlled and subject to the same quality rules of code files. It
also means that if we want to redeploy hextris at any point, we can easily just run the IaC to deploy
it.
</p><!--l. 555--><p class="indent" >   To try this out, let us first take everything down. We can do this with:  </p><div class="framedenv" id="shaded*-1">
   <!--l. 557-->
<pre class="lstlisting" id="listing-21"><span class="label"><a 
 id="x1-14001r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">destroy</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 559--><p class="indent" >   You should be prompted to confirm that you want to destroy all of the resources in the state. Once Terraform
has finished taking everything down, confirm that you can no longer access the website and that the AWS console
says the instances have been destroyed.
</p><!--l. 563--><p class="indent" >   Now go ahead and apply the changes to bring everything back:  </p><div class="framedenv" id="shaded*-1">
   <!--l. 564-->
<pre class="lstlisting" id="listing-22"><span class="label"><a 
 id="x1-14002r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">terraform</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">apply</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 566--><p class="indent" >   Confirm that this brings the website back exactly as before (with a different IP address). You can now start any
lab you want and almost instantly spin back up the website you have configured. That is the beauty of
Infrastructure as Code!
</p><!--l. 570--><p class="indent" >   Hint: destroy everything again before you leave.
</p><!--l. 572--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">13    </span> <a 
 id="x1-1500013"></a>Automated Testing</h3>
<!--l. 573--><p class="noindent" >A quick note about automated testing. As with all the practicals thus far, this practical has automated tests enabled
on your repository.
</p><!--l. 577--><p class="indent" >   From within your repository, you can run the tests locally with:  </p><div class="framedenv" id="shaded*-1">
   <!--l. 578-->
<pre class="lstlisting" id="listing-23"><span class="label"><a 
 id="x1-15001r1"></a></span><span style="color:#000000"><span 
class="ectt-1200">$</span></span><span style="color:#000000"> </span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">csse6400</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">bin</span></span><span style="color:#000000"><span 
class="ectt-1200">/</span></span><span style="color:#000000"><span 
class="ectt-1200">unittest</span></span><span style="color:#000000"><span 
class="ectt-1200">.</span></span><span style="color:#000000"><span 
class="ectt-1200">sh</span></span><span 
class="ectt-1200">&#x00A0;</span></pre>
   </div>
<!--l. 580--><p class="indent" >   While the emails saying that the tests failed can be annoyed, these automated tests allow us to ensure that
everyone is keeping up with the practical content.
</p><!--l. 583--><p class="indent" >   If fixing the test failures is not too hard, please try to do so. If you&#8217;re repeatedly not passing the practicals, we
may reach out to ensure that you&#8217;re not being left behind in the content.
</p><!--l. 1--><p class="noindent" >
</p>
   <h3 class="likesectionHead"><a 
 id="x1-16000"></a>References</h3>
<!--l. 1--><p class="noindent" >
                                                                                                    
                                                                                                    
   </p><div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 [1]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xaws-regions"></a>D.&#x00A0;Poccia,   &#8220;Now   open   &#8212;   third   availability   zone   in   the   aws   canada   (central)   region.&#8221;   
<a 
href="https://aws.amazon.com/blogs/aws/now-open-third-availability-zone-in-the-aws-canada-central-region/" class="url" ><span 
class="ectt-1200">https://aws.amazon.com/blogs/aws/now-open-third-availability-zone-in-the-aws-canada-central-region/</span></a>,
   March 2020.
</p>
   </div>
<!--l. 595--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">A    </span> <a 
 id="x1-17000A"></a>AWS Networking Terminology</h3>
<!--l. 596--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-18000"></a><span 
class="Cabin-Bold-tlf-t1-x-x-120">AWS Regions</span></span>
   Regions are the physical locations of AWS data centres. When applying Terraform, the changes are being
made to one region at a time. In our case we specified the region <span 
class="ectt-1200">us-east-1</span>. Often you do not need to
deploy to more than one region, however, it can help decrease latency and reduce risk from a major
disaster. Generally, pick a region and stick with it, we have picked <span 
class="ectt-1200">us-east-1 </span>because it is the least
expensive.
</p>
   <hr class="figure" /><div class="figure" 
>
                                                                                                    
                                                                                                    
<a 
 id="x1-180011"></a>
                                                                                                    
                                                                                                    
<!--l. 606--><p class="noindent" ><img 
src="images/aws_regions.png" alt="PIC"  
width="525" height="525"  />
<br /> </p><div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content">AWS Regions as of March 2020 <span class="cite">[<a 
href="#Xaws-regions">1</a>]</span></span></div><!--tex4ht:label?: x1-180011 -->
                                                                                                    
                                                                                                    
   </div><hr class="endfigure" />
<!--l. 610--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-19000"></a><span 
class="Cabin-Bold-tlf-t1-x-x-120">Availability Zones</span></span>
   An AWS Region will consist of availability zones, normally named with letters. For example, the AWS Region
located in Sydney, <span 
class="ectt-1200">ap-southeast-2 </span>has three availability zones: <span 
class="ectt-1200">ap-southeast-2a</span>, <span 
class="ectt-1200">ap-southeast-2b</span>, and
<span 
class="ectt-1200">ap-southeast-2c</span>. An availability zone is a collection of resources which run on separate power
supplies and networks. Essentially minimising the risk that multiple availability zones would fail at
once.
</p>
<!--l. 617--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-20000"></a><span 
class="Cabin-Bold-tlf-t1-x-x-120">VPC</span></span>
   Virtual Private Clouds, or VPCs, are virtual networks under your control, if you have managed a regular network
before it should be familiar. VPCs are contained within one region but are spread across multiple availability
zones.
</p>
   <div class="footnotes"><a 
 id="x1-12002x10"></a>
<!--l. 332--><p class="indent" >       <span class="footnote-mark"><a 
href="#fn1x0-bk" id="fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance" class="url" ><span 
class="ectt-1000">https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance</span></a></p><a 
 id="x1-13002x11"></a>
<!--l. 483--><p class="indent" >   <span class="footnote-mark"><a 
href="#fn2x0-bk" id="fn2x0"><sup class="textsuperscript">2</sup></a></span><span 
class="Cabin-Regular-tlf-t1-">Ingress and egress in networking just means incoming and outgoing respectively.</span></p><a 
 id="x1-13004x11"></a>
<!--l. 488--><p class="indent" >        <span class="footnote-mark"><a 
href="#fn3x0-bk" id="fn3x0"><sup class="textsuperscript">3</sup></a></span><span 
class="Cabin-Regular-tlf-t1-">We do not actually need SSH access as all the server configuration is done when the machine is provisioned thanks to the</span>
<span 
class="ectt-1000">user_data</span><span 
class="Cabin-Regular-tlf-t1-">, but we will try to recreate the original AWS Console exactly.</span></p>                                                                                                    </div>
 
</body></html> 

                                                                                                    


